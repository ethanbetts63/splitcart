## Plan: Unit Price Sorter Utility

This document outlines the plan to create a new utility for sorting products by their unit price, along with a temporary command to test its functionality.

### 1. Create a New, Standalone Utility: `UnitPriceSorter`

**File:** `api/utils/substitution_utils/unit_price_sorter.py`

**Class:** `UnitPriceSorter`

**Functionality:**
- The primary method will be `sort_by_unit_price(self, product_price_pairs: list) -> list`.
- It will take a list of tuples, where each tuple contains a `Product` object and its corresponding `Price` object: `[(product_A, price_A), (product_B, price_B), ...]`. This is crucial as the `Product` object itself does not contain price information.
- It will **reuse the existing `SizeComparer`** (from `api/utils/substitution_utils/size_comparer.py`) to parse the size strings from each `Product` object into a canonical numerical value (e.g., grams or milliliters).
- For each `(Product, Price)` pair, it will calculate the unit price (e.g., `Price.price / canonical_size`).
- It will handle cases where a canonical size cannot be determined (e.g., by excluding such products or assigning a very high unit price).
- It will return the original list of `(Product, Price)` pairs, sorted in ascending order based on their calculated unit price.

### 2. Create a Temporary Test Command: `test_unit_price_sorter`

**File:** `api/management/commands/test_unit_price_sorter.py`

**Functionality:**
- The `handle` method of this command will be responsible for setting up a test scenario.
- It will **hard-code** the fetching of specific `Product` and `Price` objects from the database, using the tortellini example provided by the user.
    - Example Products (Tortellini):
        - Coles Limited Ham & Cheese Tortellini ['600g']
        - Casa Della Casa Della Veal Tortellini Pasta ['630g']
        - Coles Limited Pasta Tortellini Veal ['600g']
        - Latina Fresh Fresh Veal Tortellini Pasta 4 Serve ['625g']
        - Casa Della Casa Della Ham & Cheese Tortellini Pasta ['630g']
- It will create the input list of `(Product, Price)` pairs for the `UnitPriceSorter`.
- It will instantiate `UnitPriceSorter` and call its `sort_by_unit_price` method.
- It will then print the sorted list to the console, clearly displaying:
    - Product Name
    - Product Brand
    - Product Sizes (raw string)
    - Absolute Price
    - Calculated Unit Price

### 3. Desired Outcome

- A functional utility that can sort product options by unit price.
- A clear demonstration of its correctness through the temporary test command, allowing for verification of the unit price calculation and sorting logic.
