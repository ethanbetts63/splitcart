### Session Summary: Cart Management Refinements and Substitution Page Enhancements

**Objective:** Address several issues related to cart item counting, cart naming, and enhance the user experience on the substitution page.

**1. Cart Item Count Correction:**
*   **Problem:** The cart item count in both the cart dialog and the navigation bar was incorrectly summing the quantities of all items, including potential substitutions, leading to a confusing total.
*   **Solution:** Modified `frontend/src/pages/dialog-pages/CartPage.tsx` and `frontend/src/App.tsx` to count only the number of unique items (i.e., `items.length`) instead of the sum of their quantities.

**2. Cart Naming Refinement:**
*   **Problem:** Cart naming was inconsistent, with default names generated on both the frontend (`Shopping List #NaN`) and backend (`New Cart`). Renaming carts to an existing name resulted in a backend `IntegrityError` without a user-friendly message.
*   **Solution:**
    *   **Backend (`users/cart_manager.py`):** Modified the `create_cart` method to automatically generate sequential cart names (e.g., "Shopping List #1", "Shopping List #2"). This logic now includes a `try...except IntegrityError` loop to ensure uniqueness and handle collisions gracefully.
    *   **Backend (`api/views/cart_views.py`):** Simplified `CartListCreateView` by removing the overridden `create` method and updating `perform_create` to call `cart_manager.create_cart` without a name argument.
    *   **Backend (`api/views/cart_views.py`):** Implemented `try...except IntegrityError` in `RenameCartView` to catch duplicate name attempts and return a user-friendly error message.
    *   **Frontend (`frontend/src/context/CartContext.tsx`):** Updated the `renameCart` function to parse the backend's error response and set a specific `cartError` message.
    *   **Frontend (`frontend/src/pages/dialog-pages/CartPage.tsx`):** Removed the frontend cart name generation logic and added a display for the `cartError` message.
    *   **Frontend (`frontend/src/context/CartContext.tsx`):** Modified `createNewCart` to no longer send a name, relying on the backend for generation.

**3. Substitution Page Enhancements (`frontend/src/pages/SubstitutionPage.tsx`):**
*   **Problem:** Two previously existing buttons, "Approve All" and "Skip Substitution," were missing from the page.
*   **Current Progress:**
    *   Added a `handleSkipSubstitutions` function and a corresponding "Skip All Substitutions" button that navigates directly to the final cart page without approving any substitutes.
    *   Refactored `handleOptimizeAndNavigate` to accept an optional `selections` argument, preparing for the "Approve All" button's implementation.

**Next Steps:** Implement the "Approve All & Next" button and its associated logic on the `SubstitutionPage` to complete the user's request.